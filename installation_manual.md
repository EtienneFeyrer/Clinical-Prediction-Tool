# Installation Guide - Annotation Service

## Prerequisites
- Python 3.8+
- MariaDB 10.5+
- Git

## Installation Steps

### 1. Clone the Repository
```bash
git clone <repository-url>
cd Teamprojekt_SS25_Gruppe1
```

### 2. Check Existing Dependencies
Your environment already includes most required packages. But the GUI Package needs to be installed manually

##### Installing GUI Packages

```
pip install PyQt5==5.15.11 PyQt5-sip==12.17.0 PyQt5-Qt5==5.15.17
```

Now verify the following key dependencies are present:

```bash
pip list | grep -E "(flask|scikit-learn|mysql-connector-python|flask-cors|flask-limiter|requests|threading|PyQt5-sip|PyQt5|PyQt5-Qt5)"
```

**✅ Already Installed (from your requirements.txt):**
- `flask==3.1.1` - Web framework for REST API
- `scikit-learn==1.7.0` - Machine learning library
- `mysql-connector-python==9.4.0` - MariaDB connector (covers mariadb-connector)
- `flask-cors==6.0.1` - Cross-Origin Resource Sharing
- `Flask-Limiter==3.12` - Rate limiting (covers flask-limiter)
- `requests==2.32.4` - HTTP requests library
- Python `threading` module - Built-in Python module

**Install manually**
```bash
- `PyQt5==5.15.11`
- `PyQt5-sip==12.17.0`
- `PyQt5-Qt5==5.15.17`
```
### 3. Additional Dependencies (Only if Missing)

**Check if you need these additional packages:**

```bash
# Check for missing packages
python -c "
try:
    import mariadb
    print('✅ mariadb connector available')
except ImportError:
    print('❌ mariadb connector missing - install mariadb-connector-python')
"
```

**Install only if missing:**
```bash
# Only install if the above check shows missing packages
pip install mariadb-connector-python  # Alternative to mysql-connector-python
```

### 4. Database Setup

**Install and Configure MariaDB 10.5+:**

**Ubuntu/Debian:**
```bash
sudo apt update
sudo apt install mariadb-server mariadb-client
sudo mysql_secure_installation
```

**macOS (using Homebrew):**
```bash
brew install mariadb
brew services start mariadb
mysql_secure_installation
```

**Windows:**
Download and install from [MariaDB Downloads](https://mariadb.org/download/)

### 5. Automated Database Setup

**Use the provided initialization script for complete database setup:**

```bash
# Run the automated database setup script
python database/setup.py
```

The script will:
- ✅ **Create database user**: `annotation_user` with secure password
- ✅ **Create database**: `AnnotationCache` 
- ✅ **Create tables**: `Annotation` and `Transcript` with proper schema
- ✅ **Test connection**: Verify everything works correctly
- ✅ **Generate config**: Creates `db_config.py` for your application

### 6. Configuration File

**Automated Configuration** - The setup script creates `db_config.py` automatically:

```
# Generated by database_setup.py
DATABASE_CONFIG = {
    'host': 'localhost',
    'port': 3306,
    'user': 'annotation_user',
    'password': 'secure_pass_2024',
    'database': 'AnnotationCache'
}
```


### 8. Running the Application

**Database is automatically configured** - just start your server:

```bash
# Start the Annotation Service (Flask API)
python api/server.py

# Expected output:
# Running on http://0.0.0.0:5001
# Press CTRL+C for graceful shutdown
# Signal handler registered for Ctrl+C
```

**Start the GUI:**
```bash
python GUI/app_window.py
python GUI/download_hpo_files.py #<- run this once to download HPO library
```


